/*
 * QSA CSS3 Selector Engine v1.2.3
 *
 * Copyright 2011, Dmitriy Pakhtinov ( spb.piksel@gmail.com )
 *
 * http://spb-piksel.ru/
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 *
 * Update: 05-05-2012
 */
(function(F,A){var s=/\s*(?:(\*|(?:(?:\*|[\w\-]+)\|)?(?:[\w\-]+|\*)))?(?:\[\s*(?:((?:[\w\-]+\|)?[\w\-]+)\s*((?:~|\^|\$|\*|\||!)?=)\s*)?((?:".*?(?:(?:[\\]{2}(?="))|[^\\])"|'.*?(?:(?:[\\]{2}(?='))|[^\\])'|[^\]].*?)?)\s*\])?(?:(\.|#)([\w\-]+))?(?:(:(?::)?)([\w\-]+)(?:\(\s*([^)]+)\s*\))?)?(?:(?:\s*(?=\s))?(?:(?:\s(?=,|>|\+|~))?([\s,>+~](?!$)))?)?/g,G=!0,v=!1,x=F.document,B=x.documentElement,D=Array.prototype.slice,H=Array.prototype.splice,E=Array.prototype.push,I=function(){var b=x.createElement("div");
b.innerHTML="<p class='TEST'></p>";return!b.querySelectorAll||0===b.querySelectorAll(".TEST").length?!1:!0}(),h={moveElems:function(){var b=!0,d=x.createElement("div");d.appendChild(x.createComment(""));try{D.call(B.childNodes,0)}catch(a){b=!1}if(0<d.getElementsByTagName("*").length||!b)return d=null,function(a,c,d,h){if(!d&&b)E.apply(c,D.call(a,0));else if(!d&&h)E.apply(c,a);else{d=0;for(h=c.length;a[d];d++)1===a[d].nodeType&&(c[h++]=a[d]);h===c.length||(c.length=h)}return c};d=null;return function(a,
b){E.apply(b,D.call(a,0));return b}}(),sortElems:function(){[0,0].sort(function(){G=!1;return 0});return B.compareDocumentPosition?function(b,d){if(b==d)return v=!0,0;if(B.compareDocumentPosition)return!b.compareDocumentPosition||!d.compareDocumentPosition?b.compareDocumentPosition?-1:1:b.compareDocumentPosition(d)&4?-1:b===d?0:1}:"sourceIndex"in B?function(b,d){return b==d?(v=!0,0):!b.sourceIndex||!d.sourceIndex?b.sourceIndex?-1:1:b.sourceIndex-d.sourceIndex}:x.createRange?function(b,d){if(b==d)return v=
!0,0;if(!b.ownerDocument||!d.ownerDocument)return b.ownerDocument?-1:1;var a=b.ownerDocument.createRange(),n=d.ownerDocument.createRange();a.setStart(b,0);a.setEnd(b,0);n.setStart(d,0);n.setEnd(d,0);return a.compareBoundaryPoints(Range.START_TO_END,n)}:function(b,d){b==d&&(v=!0);return 0}}(),attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(b){return b.getAttribute("href",2)},type:function(b){return b.getAttribute("type")},style:function(b){var d=b.getAttribute("style");return"object"===
typeof d?b.style.cssText||"":d}},checkAttr:function(b,d,a){var a=h.attrHandle[a]?h.attrHandle[a](d):null!=d[a]?d[a]:d.getAttribute(a),d=b[3],b=b[4],n=a+"";return null==a?"!="===d:"="===d?n===b:"*="===d?0<=n.indexOf(b):"~="===d?0<=(" "+n+" ").indexOf(" "+b+" "):!b?n&&!1!==a:"!="===d?n!==b:"^="===d?0===n.indexOf(b):"$="===d?n.substr(n.length-b.length)===b:"|="===d?n===b||n.substr(0,b.length+1)===b+"-":!1},filters:function(){function b(a,b,c){a=c-b[1];return 0===b[0]?0===a:0===a%b[0]&&0<=a/b[0]}var d=
{":":{"nth-child":function(a,d){return b(a,d,a.nodeIndex||1)},"nth-last-child":function(a,d){var c=a.parentNode;return b(a,d,(c&&(c._qsaCE||c.children.length||0)+1||2)-(a.nodeIndex||1))},"first-child":function(a){a=a.previousSibling;return!(a&&(3===a.nodeType?a.previousSibling:1))},"last-child":function(a){a=a.nextSibling;return!(a&&(3===a.nodeType?a.nextSibling:1))},empty:function(a){return!a.firstChild},enabled:function(a){return!1===a.disabled&&"hidden"!==a.type},disabled:function(a){return!0===
a.disabled},checked:function(a){return!0===a.checked},not:function(a,b,c,d){return(!d[1]||d[1]&&a.nodeName===d[1])&&0<h.checkRule(d,[a],[]).length?!1:!0},contains:function(a,b){return 0<=(a.textContent||a.innerText||a.nodeValue||a.value||"").indexOf(b)}},"::":{}};d[":"]["only-child"]=function(a){return d[":"]["first-child"](a)&&d[":"]["last-child"](a)};return d}(),preFilters:function(){var b={"nth-child":function(b){var a=b[9].replace(/^\+|\s*/g,""),a=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===a&&
"2n"||"odd"===a&&"2n+1"||!/\D/.test(a)&&"0n+"+a||a);b[9]=[a[1]+(a[2]||1)-0,a[3]-0];return!(1===b[9][0]&&0===b[9][1])}};b["nth-last-child"]=b["nth-child"];return b}(),checkRule:function(b,d,a,n){var c,m,u=d.length,i,l,g=!1,p,o,e,f=0,t,j;!b[2]&&b[4]?(b[2]=b[4],b[4]=A):b[4]&&(b[4]=b[4].replace(/^(?:"(.*)"|'(.*)')$/,"$1$2").replace(/\\/g,""));i=h.attrMap[b[2]]||b[2];p="."===b[5]?1:"#"===b[5]?2:!1;l=b[6];o=h.filters[b[7]]&&h.filters[b[7]][b[8]]||b[8]&&h.error(b[8])||!1;if(!i&&!p&&!o&&u)h.moveElems(d,a,
!n,d instanceof Array);else{if(o&&b[9])s.lastIndex=0,e=s.exec(b[9]),e[1]=e[1]&&"*"!==e[1]?e[1].replace("|",":").toUpperCase():A,h.preFilters[b[8]]&&(g=h.preFilters[b[8]](b));c=a.length;for(n=0;n<u;n++)if(m=d[n],1===m.nodeType){i&&!h.checkAttr(b,m,i)&&(m=null);if(m&&p)if(1===p){if(!m.className||!(0<=(" "+m.className+" ").indexOf(" "+l+" ")))m=null}else 2===p&&m.id!==l&&(m=null);if(m&&o){if(g&&(t=m.parentNode)&&(!m.nodeIndex||t._qsaCL!==t.children.length)){f=0;for(j=t.firstChild;j;j=j.nextSibling)if(1===
j.nodeType)j.nodeIndex=++f;t._qsaCE=f;t._qsaCL=t.children.length}o(m,b[9],b,e)||(m=null)}m&&(a[c++]=m)}c===a.length||(a.length=c)}return a},parser:function(b,d,a,n){var c,m,u,i,l,g,p,o=b.length,e,f,t=!0,j,k=[],y=[],v,C,z=a[0],B=s.lastIndex,q,w,r;for(m=0,u=d.length;m<u;m++){C=d[m];r=B;do{s.lastIndex=r;c=s.exec(b);(v=!c[4]&&!c[5]&&!c[7])&&!c[1]&&h.error(b.substring(r));r=s.lastIndex;q=c[1]&&"*"!==c[1]?c[1].replace("|",":"):A;j=c[10];if(v&&!0===t&&("~"===j||">"===j))y.push({tag:q?q.toUpperCase():q,rule:j}),
j=!0,e=[];else if(">"===t){e=[];w=q?q.toUpperCase():q;for(i=0;f=k[i];i++){f=f.children;for(g=0;l=f[g];g++)1===l.nodeType&&(w?w===l.nodeName&&(e[e.length]=l):e[e.length]=l)}a[1]=!0}else if("+"===t||"~"===t){e=[];for(i=0,l=k.length;i<l;i++){w=q?q.toUpperCase():q;for(f=k[i];(f=f.nextSibling)&&!(1===f.nodeType&&(w?w===f.nodeName&&(e[e.length]=f):e[e.length]=f,"+"===t)););}a[1]=!0}else if("#"===c[5]&&!(p=!1)||"id"===c[2]&&"="===c[3]&&(p=!0)){p&&(c[6]=c[4].replace(/^(?:"(.*)"|'(.*)')$/,"$1$2").replace(/\\/g,
""),c[2]=c[3]=c[4]=A);e=[];g=c[6];if(C===x){k=[];w=q?q.toUpperCase():q;do if(l=x.getElementById(g))k[k.length]=l,l.setAttribute("id",g+" _");while(l);for(p=0;f=k[p];p++)if(f.setAttribute("id",g),!w||f.nodeName===w)e[e.length]=f}else{k=C.getElementsByTagName(q||"*");for(p=0;f=k[p];p++)f.id&&f.id===g&&(e[e.length]=f)}c[5]=A}else"."===c[5]&&!q&&C.getElementsByClassName?(e=C.getElementsByClassName(c[6]),v=!c[4]&&!c[7]&&(","===j||r===o),c[5]=A):e=C.getElementsByTagName(q||"*");if(v)k=e,0==y.length&&e.length&&
(","===j||r===o)&&h.moveElems(e,z,!q,e instanceof Array);else if(k=0<e.length?0==y.length&&(","===j||r===o)?h.checkRule(c,e,z,q):h.checkRule(c,e,[],q):[],!j&&r<o){l=k.length;do{s.lastIndex=r;c=s.exec(b);r=s.lastIndex;j=c[10];if(l)k=0==y.length&&(","===j||r===o)?h.checkRule(c,k,z,q):h.checkRule(c,k,[],q),l=k.length;if(j)break}while(r<o)}if(!0!==j&&0<y.length)if(0===k.length)y.length=0;else{e=[];for(g=0;f=k[g];)e[g++]=f;for(i=z.length;c=y.pop();)if(l=y.length,">"===c.rule)for(g=0;f=e[g];g++)f.parentNode&&
(!c.tag||f.parentNode.nodeName===c.tag)?0===l?","===j||r===o?z[i++]=k[g]:e[g]=k[g]:e[g]=f.parentNode:e[g]=!0;else for(g=0;f=e[g];g++){f=f.previousSibling;for(p=!1;f;){if(1===f.nodeType&&(!c.tag||f.nodeName===c.tag)){0===l?","===j||r===o?z[i++]=k[g]:e[g]=k[g]:e[g]=f;p=!0;break}f=f.previousSibling}p||(e[g]=!0)}i===z.length||(z.length=i);if(!(","===j||r===o)){k=[];for(g=0;f=e[g];g++)!0!==f&&k.push(f)}}if(" "===j)if(0<k.length)s.lastIndex=r,a=h.parser(b,k,a,!0),r=s.lastIndex,a[1]=!0;else{s.lastIndex=
r;do if(c=s.exec(b),!c[4]&&!c[5]&&!c[7]&&!c[1]&&h.error(b.substring(r)),","===c[10])break;while(s.lastIndex<o);r=s.lastIndex;j=c[10]}if(","===j&&(a[1]=!0,n))break;t=j}while(r<o)}return a},querySelectorAll:function(b,d,a,n){a=a||[];a.length=a.length||0;d=d&&(d.nodeType?[d]:d)||[x];s.lastIndex=0;var c,m,u,i,l=!0,g=a instanceof Array;if(I){var p,o,e,f=/^\s*[>+~]/.test(b);u=[a,0<a.length||1<d.length];for(c=0,m=d.length;c<m;c++)if(i=d[c],9===i.nodeType)try{h.moveElems(i.querySelectorAll(b),u[0]),l=!1}catch(t){break}else if(1===
i.nodeType&&"OBJECT"!==i.nodeName)if(f&&(p=i.parentNode)){e=(o=i.getAttribute("id"))&&o.replace(/'/g,"\\$&")||"__qsaEngine__";!o&&i.setAttribute("id",e);try{h.moveElems(p.querySelectorAll("[id='"+e+"'] "+b),u[0]),l=!1}catch(j){break}!o&&i.removeAttribute("id")}else if(f)break;else try{h.moveElems(i.querySelectorAll(b),u[0]),l=!1}catch(k){break}}l&&(u=h.parser(b,d,[a,0<a.length||1<d.length]));if(u[1]&&1<a.length)if(n){for(c=a.length;c--;)a[c]._hasDuplicate?(H.call(a,c,1),g||delete a[a.length]):a[c]._hasDuplicate=
!0;for(c=a.length;c--;)a[c]._hasDuplicate=null}else if(v=G,Array.prototype.sort.call(a,h.sortElems),v)for(c=1;c<a.length;c++)a[c]===a[c-1]&&(H.call(a,c--,1),g||delete a[a.length]);return a},error:function(b){throw Error("Syntax error: "+b);}};F.qsa=h})(window);
